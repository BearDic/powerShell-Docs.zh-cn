---
title: 解释 ErrorRecord 对象 |Microsoft Docs
ms.custom: ''
ms.date: 09/13/2016
ms.reviewer: ''
ms.suite: ''
ms.tgt_pltfrm: ''
ms.topic: article
ms.assetid: 2a65b964-5bc6-4ade-a66b-b6afa7351ce7
caps.latest.revision: 9
ms.openlocfilehash: d77e4daf25bfcd5e76c184f6dbdb619368627bfa
ms.sourcegitcommit: b6871f21bd666f9cd71dd336bb3f844cf472b56c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/03/2019
ms.locfileid: "56857223"
---
# <a name="interpreting-errorrecord-objects"></a><span data-ttu-id="2f96b-102">解释 ErrorRecord 对象</span><span class="sxs-lookup"><span data-stu-id="2f96b-102">Interpreting ErrorRecord Objects</span></span>

<span data-ttu-id="2f96b-103">在大多数情况下， [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象表示的命令或脚本生成一个非终止错误。</span><span class="sxs-lookup"><span data-stu-id="2f96b-103">In most cases, an [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object represents a non-terminating error generated by a command or script.</span></span> <span data-ttu-id="2f96b-104">终止错误还可以指定其他信息中通过 ErrorRecord [System.Management.Automation.Icontainserrorrecord](/dotnet/api/System.Management.Automation.IContainsErrorRecord)接口。</span><span class="sxs-lookup"><span data-stu-id="2f96b-104">Terminating errors can also specify the additional information in an ErrorRecord via the [System.Management.Automation.Icontainserrorrecord](/dotnet/api/System.Management.Automation.IContainsErrorRecord) interface.</span></span>

<span data-ttu-id="2f96b-105">如果你想要编写错误处理程序在您的脚本或主机用于处理特定错误的执行过程中发生命令或脚本，您必须解释[System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象，以确定是否它表示要处理的错误的类。</span><span class="sxs-lookup"><span data-stu-id="2f96b-105">If you want to write an error handler in your script or a host to handle specific errors that occur during command or script execution, you must interpret the [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object to determine whether it represents the class of error that you want to handle.</span></span>

<span data-ttu-id="2f96b-106">当一个 cmdlet 遇到终止或非终止错误时，它应创建错误记录描述错误条件。</span><span class="sxs-lookup"><span data-stu-id="2f96b-106">When a cmdlet encounters a terminating or non-terminating error, it should create an error record that describes the error condition.</span></span> <span data-ttu-id="2f96b-107">主机应用程序必须调查这些错误记录，并执行任何操作将会减少错误。</span><span class="sxs-lookup"><span data-stu-id="2f96b-107">The host application must investigate these error records and perform whatever action will mitigate the error.</span></span> <span data-ttu-id="2f96b-108">主机应用程序还必须调查错误记录为非终止错误，无法处理一条记录，但可以继续，并它必须调查导致停止管道的终止错误的错误记录。</span><span class="sxs-lookup"><span data-stu-id="2f96b-108">The host application must also investigate error records for nonterminating errors that failed to process a record but were able to continue, and it must investigate error records for terminating errors that caused the pipeline to stop.</span></span>

> [!NOTE]
> <span data-ttu-id="2f96b-109">对于终止错误，该 cmdlet 的调用[System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError)方法。</span><span class="sxs-lookup"><span data-stu-id="2f96b-109">For terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.Throwterminatingerror\*](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError) method.</span></span> <span data-ttu-id="2f96b-110">对于非终止性错误，该 cmdlet 的调用[System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError)方法。</span><span class="sxs-lookup"><span data-stu-id="2f96b-110">For non-terminating errors, the cmdlet calls the [System.Management.Automation.Cmdlet.Writeerror\*](/dotnet/api/System.Management.Automation.Cmdlet.WriteError) method.</span></span>

## <a name="error-record-design"></a><span data-ttu-id="2f96b-111">错误记录设计</span><span class="sxs-lookup"><span data-stu-id="2f96b-111">Error Record Design</span></span>

<span data-ttu-id="2f96b-112">错误记录用于提供其他错误同时确保每个错误记录中的组合的信息唯一不可用在异常中的信息。</span><span class="sxs-lookup"><span data-stu-id="2f96b-112">Error records are designed to provide additional error information that is not available in exceptions while ensuring that the combined information in each error record is unique.</span></span> <span data-ttu-id="2f96b-113">此唯一性允许主机应用程序检查错误记录的不同部分，以便它可以识别的错误条件，并且必须采取的操作主机。</span><span class="sxs-lookup"><span data-stu-id="2f96b-113">This uniqueness allows the host application to inspect the different parts of the error record so that it can identify the error condition and the action the host must take.</span></span>

## <a name="interpreting-error-records"></a><span data-ttu-id="2f96b-114">解释错误记录</span><span class="sxs-lookup"><span data-stu-id="2f96b-114">Interpreting Error Records</span></span>

<span data-ttu-id="2f96b-115">你可以查看要识别的错误的错误记录的多个部分。</span><span class="sxs-lookup"><span data-stu-id="2f96b-115">You can review several parts of the error record to identify the error.</span></span> <span data-ttu-id="2f96b-116">这些部分如下所示：</span><span class="sxs-lookup"><span data-stu-id="2f96b-116">These parts include the following:</span></span>

- <span data-ttu-id="2f96b-117">错误类别</span><span class="sxs-lookup"><span data-stu-id="2f96b-117">The error category</span></span>

- <span data-ttu-id="2f96b-118">错误异常</span><span class="sxs-lookup"><span data-stu-id="2f96b-118">The error exception</span></span>

- <span data-ttu-id="2f96b-119">完全限定的错误标识符 (FQID)</span><span class="sxs-lookup"><span data-stu-id="2f96b-119">The fully qualified error identifier (FQID)</span></span>

- <span data-ttu-id="2f96b-120">其他信息</span><span class="sxs-lookup"><span data-stu-id="2f96b-120">Other information</span></span>

### <a name="the-error-category"></a><span data-ttu-id="2f96b-121">错误类别</span><span class="sxs-lookup"><span data-stu-id="2f96b-121">The Error Category</span></span>

<span data-ttu-id="2f96b-122">错误记录的错误类别是由提供的预定义常量之一[System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory)枚举。</span><span class="sxs-lookup"><span data-stu-id="2f96b-122">The error category of the error record is one of the predefined constants provided by the [System.Management.Automation.Errorcategory](/dotnet/api/System.Management.Automation.ErrorCategory) enumeration.</span></span> <span data-ttu-id="2f96b-123">此信息是可通过[System.Management.Automation.Errorrecord.Categoryinfo\*](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo)的属性[System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象。</span><span class="sxs-lookup"><span data-stu-id="2f96b-123">This information  is available through the [System.Management.Automation.Errorrecord.Categoryinfo\*](/dotnet/api/System.Management.Automation.ErrorRecord.CategoryInfo) property of the [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="2f96b-124">CloseError、 OpenError、 InvalidType、 ReadError 和 WriteError 类别和其他错误类别，可以指定该 cmdlet。</span><span class="sxs-lookup"><span data-stu-id="2f96b-124">The cmdlet can specify the CloseError, OpenError, InvalidType, ReadError, and WriteError categories, and other error categories.</span></span> <span data-ttu-id="2f96b-125">主机应用程序可以使用的错误类别捕获的错误组。</span><span class="sxs-lookup"><span data-stu-id="2f96b-125">The host application can use the error category to capture groups of errors.</span></span>

### <a name="the-exception"></a><span data-ttu-id="2f96b-126">异常</span><span class="sxs-lookup"><span data-stu-id="2f96b-126">The Exception</span></span>

<span data-ttu-id="2f96b-127">错误记录中包含的异常提供的 cmdlet，可通过访问[System.Management.Automation.Errorrecord.Exception\*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception)属性的[System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象。</span><span class="sxs-lookup"><span data-stu-id="2f96b-127">The exception included in the error record is provided by the cmdlet and can be accessed through the [System.Management.Automation.Errorrecord.Exception\*](/dotnet/api/System.Management.Automation.ErrorRecord.Exception) property of the [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object.</span></span>

<span data-ttu-id="2f96b-128">主机应用程序可以使用`is`关键字来标识异常的特定类或派生类。</span><span class="sxs-lookup"><span data-stu-id="2f96b-128">Host applications can use the `is` keyword to identify that the exception is of a specific class or of a derived class.</span></span> <span data-ttu-id="2f96b-129">最好是为 branch 异常类型，如下面的示例中所示。</span><span class="sxs-lookup"><span data-stu-id="2f96b-129">It is better to branch on the exception type, as shown in the following example.</span></span>

`if (MyNonTerminatingError.Exception is AccessDeniedException)`

<span data-ttu-id="2f96b-130">这样一来，您捕获派生的类。</span><span class="sxs-lookup"><span data-stu-id="2f96b-130">This way, you catch the derived classes.</span></span> <span data-ttu-id="2f96b-131">但是，有问题如果异常进行反序列化。</span><span class="sxs-lookup"><span data-stu-id="2f96b-131">However, there are problems if the exception is deserialized.</span></span>

### <a name="the-fqid"></a><span data-ttu-id="2f96b-132">FQID</span><span class="sxs-lookup"><span data-stu-id="2f96b-132">The FQID</span></span>

<span data-ttu-id="2f96b-133">FQID 是可用于标识错误的最具体信息。</span><span class="sxs-lookup"><span data-stu-id="2f96b-133">The FQID is the most specific information you can use to identify the error.</span></span> <span data-ttu-id="2f96b-134">它是包含 cmdlet，定义标识符、 在 cmdlet 类，并报告了错误的源的名称的字符串。</span><span class="sxs-lookup"><span data-stu-id="2f96b-134">It is a string that includes a cmdlet-defined identifier, the name of the cmdlet class, and the source that reported the error.</span></span> <span data-ttu-id="2f96b-135">一般情况下，错误记录相当于 Windows 事件日志的事件记录。</span><span class="sxs-lookup"><span data-stu-id="2f96b-135">In general, an error record is analogous to an event record of a Windows Event log.</span></span> <span data-ttu-id="2f96b-136">FQID 是类似于标识的事件记录的类的以下元组: (*日志名称*，*源*，*事件 ID*)。</span><span class="sxs-lookup"><span data-stu-id="2f96b-136">The FQID is analogous to the following tuple, which identifies the class of the event record: (*log name*, *source*, *event ID*).</span></span>

<span data-ttu-id="2f96b-137">FQID 旨在作为单个字符串进行检查。</span><span class="sxs-lookup"><span data-stu-id="2f96b-137">The FQID is designed to be inspected as a single string.</span></span> <span data-ttu-id="2f96b-138">但是，存在情况设计错误标识符分析由主机应用程序。</span><span class="sxs-lookup"><span data-stu-id="2f96b-138">However, cases exist in which the error identifier is designed to be parsed by the host application.</span></span> <span data-ttu-id="2f96b-139">下面的示例是格式正确的完全限定的错误标识符。</span><span class="sxs-lookup"><span data-stu-id="2f96b-139">The following example is a well-formed fully qualified error identifier.</span></span>

`CommandNotFoundException,Microsoft.PowerShell.Commands.GetCommandCommand.`

<span data-ttu-id="2f96b-140">在上一示例中，第一个标记是错误标识符后, 跟在 cmdlet 类的名称。</span><span class="sxs-lookup"><span data-stu-id="2f96b-140">In the previous example, the first token is the error identifier, which is followed by the name of the cmdlet class.</span></span> <span data-ttu-id="2f96b-141">错误标识符可以是单个标记，也可以是允许在检查标识符的分支是以点号分隔的标识符。</span><span class="sxs-lookup"><span data-stu-id="2f96b-141">The error identifier can be a single token, or it can be a dot-separated identifier that allows for branching on inspection of the identifier.</span></span> <span data-ttu-id="2f96b-142">不要在错误标识符中使用空格或标点。</span><span class="sxs-lookup"><span data-stu-id="2f96b-142">Do not use white space or punctuation in the error identifier.</span></span> <span data-ttu-id="2f96b-143">它是尤为重要，不应使用逗号;Windows PowerShell 使用逗号来分隔标识符和 cmdlet 类名称。</span><span class="sxs-lookup"><span data-stu-id="2f96b-143">It is especially important not to use a comma; a comma is used by Windows PowerShell to separate the identifier and the cmdlet class name.</span></span>

### <a name="other-information"></a><span data-ttu-id="2f96b-144">其他信息</span><span class="sxs-lookup"><span data-stu-id="2f96b-144">Other Information</span></span>

<span data-ttu-id="2f96b-145">[System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord)对象还可能会提供描述的环境发生了错误的信息。</span><span class="sxs-lookup"><span data-stu-id="2f96b-145">The [System.Management.Automation.Errorrecord](/dotnet/api/System.Management.Automation.ErrorRecord) object might also provide information that describes the environment in which the error occurred.</span></span> <span data-ttu-id="2f96b-146">此信息包括错误详细信息、 调用信息和错误发生时正在处理的目标对象等项。</span><span class="sxs-lookup"><span data-stu-id="2f96b-146">This information includes items such as error details, invocation information, and the target object that was being processed when the error occurred.</span></span> <span data-ttu-id="2f96b-147">尽管此信息可供主机应用程序，它是通常不用于识别的错误。</span><span class="sxs-lookup"><span data-stu-id="2f96b-147">Although this information might be useful to the host application, it is not typically used to identify the error.</span></span> <span data-ttu-id="2f96b-148">此信息将可通过以下属性：</span><span class="sxs-lookup"><span data-stu-id="2f96b-148">This information is available through the following properties:</span></span>

[<span data-ttu-id="2f96b-149">System.Management.Automation.Errorrecord.Errordetails\*</span><span class="sxs-lookup"><span data-stu-id="2f96b-149">System.Management.Automation.Errorrecord.Errordetails\*</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.ErrorDetails)

[<span data-ttu-id="2f96b-150">System.Management.Automation.Errorrecord.Invocationinfo\*</span><span class="sxs-lookup"><span data-stu-id="2f96b-150">System.Management.Automation.Errorrecord.Invocationinfo\*</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.InvocationInfo)

[<span data-ttu-id="2f96b-151">System.Management.Automation.Errorrecord.Targetobject\*</span><span class="sxs-lookup"><span data-stu-id="2f96b-151">System.Management.Automation.Errorrecord.Targetobject\*</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord.TargetObject)

## <a name="see-also"></a><span data-ttu-id="2f96b-152">另请参阅</span><span class="sxs-lookup"><span data-stu-id="2f96b-152">See Also</span></span>

[<span data-ttu-id="2f96b-153">System.Management.Automation.Errorrecord</span><span class="sxs-lookup"><span data-stu-id="2f96b-153">System.Management.Automation.Errorrecord</span></span>](/dotnet/api/System.Management.Automation.ErrorRecord)

[<span data-ttu-id="2f96b-154">System.Management.Automation.Errorcategory</span><span class="sxs-lookup"><span data-stu-id="2f96b-154">System.Management.Automation.Errorcategory</span></span>](/dotnet/api/System.Management.Automation.ErrorCategory)

[<span data-ttu-id="2f96b-155">System.Management.Automation.Errorcategoryinfo</span><span class="sxs-lookup"><span data-stu-id="2f96b-155">System.Management.Automation.Errorcategoryinfo</span></span>](/dotnet/api/System.Management.Automation.ErrorCategoryInfo)

[<span data-ttu-id="2f96b-156">System.Management.Automation.Cmdlet.Writeerror\*</span><span class="sxs-lookup"><span data-stu-id="2f96b-156">System.Management.Automation.Cmdlet.Writeerror\*</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.WriteError)

[<span data-ttu-id="2f96b-157">System.Management.Automation.Cmdlet.Throwterminatingerror\*</span><span class="sxs-lookup"><span data-stu-id="2f96b-157">System.Management.Automation.Cmdlet.Throwterminatingerror\*</span></span>](/dotnet/api/System.Management.Automation.Cmdlet.ThrowTerminatingError)

[<span data-ttu-id="2f96b-158">添加非终止错误报告到 Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2f96b-158">Adding Non-Terminating Error Reporting to Your Cmdlet</span></span>](./adding-non-terminating-error-reporting-to-your-cmdlet.md)

[<span data-ttu-id="2f96b-159">Windows PowerShell 错误报告</span><span class="sxs-lookup"><span data-stu-id="2f96b-159">Windows PowerShell Error Reporting</span></span>](./error-reporting-concepts.md)

[<span data-ttu-id="2f96b-160">编写 Windows PowerShell Cmdlet</span><span class="sxs-lookup"><span data-stu-id="2f96b-160">Writing a Windows PowerShell Cmdlet</span></span>](./writing-a-windows-powershell-cmdlet.md)
