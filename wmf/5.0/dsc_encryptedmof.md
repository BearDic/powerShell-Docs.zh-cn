---
ms.date: 06/12/2017
keywords: wmf,powershell,安装程序
ms.openlocfilehash: 9af931a1a2b545ba36826246c4155f42052a16bf
ms.sourcegitcommit: e7445ba8203da304286c591ff513900ad1c244a4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "62085692"
---
# <a name="mof-documents-are-encrypted-by-default"></a><span data-ttu-id="13b00-102">MOF 文档默认加密</span><span class="sxs-lookup"><span data-stu-id="13b00-102">MOF Documents Are Encrypted By Default</span></span>

<span data-ttu-id="13b00-103">配置文档包含敏感信息。</span><span class="sxs-lookup"><span data-stu-id="13b00-103">Configuration documents contain sensitive information.</span></span> <span data-ttu-id="13b00-104">在以前版本的 DSC 中，你需要分发和管理证书以确保配置中的凭据安全。</span><span class="sxs-lookup"><span data-stu-id="13b00-104">In previous versions of DSC you were required to distribute and manage certificates in order to secure credentials within a configuration.</span></span> <span data-ttu-id="13b00-105">对于许多人来说，这是一项重大的管理负担，即使为此大费周章，仍会余下某些尚未（且无法）确保安全配置信息。</span><span class="sxs-lookup"><span data-stu-id="13b00-105">For many, this was a significant management burden and even with all of the work it took to do this you were still left with some configuration information that was not and could not be secured.</span></span>

<span data-ttu-id="13b00-106">现在已经不再如此，因为**默认保护所有配置 MOF**。</span><span class="sxs-lookup"><span data-stu-id="13b00-106">That is no longer the case because **all configuration MOFs are secured by default**.</span></span> <span data-ttu-id="13b00-107">不需要任何证书或元配置设置。</span><span class="sxs-lookup"><span data-stu-id="13b00-107">No certificates or meta-configuration settings are needed.</span></span> <span data-ttu-id="13b00-108">目标节点上的本地配置管理器 (LCM) 每次将配置 MOF 保存到磁盘时都将对其进行加密。</span><span class="sxs-lookup"><span data-stu-id="13b00-108">Any time a configuration MOF is saved to disk by the Local Configuration Manager (LCM) on a target node, it is encrypted.</span></span> <span data-ttu-id="13b00-109">使用 [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) 加密 MOF。</span><span class="sxs-lookup"><span data-stu-id="13b00-109">The MOFs are encrypted using [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).</span></span> <span data-ttu-id="13b00-110">**注意：** 配置脚本生成的 MOF 未加密。</span><span class="sxs-lookup"><span data-stu-id="13b00-110">**Note:** MOFs generated by a configuration script are not encrypted.</span></span>

<span data-ttu-id="13b00-111">**示例：** 推送模式加密 ![MOF 加密](../images/MOF_Encryption.jpg)</span><span class="sxs-lookup"><span data-stu-id="13b00-111">**Example:** Encryption in push mode ![MOF Encryption](../images/MOF_Encryption.jpg)</span></span>

<span data-ttu-id="13b00-112">如果你已将证书方法用于加密密码，或者你的密码需要额外的安全性，[基于证书加密的现有方法](https://msdn.microsoft.com/powershell/dsc/securemof)将继续发挥作用。</span><span class="sxs-lookup"><span data-stu-id="13b00-112">If you are already using the certificate method for encrypting passwords or if you need additional security for your passwords, the [existing method of certificate based encryption](https://msdn.microsoft.com/powershell/dsc/securemof) will continue to work.</span></span> <span data-ttu-id="13b00-113">将得到使用 DPAPI 完全加密的 MOF 文档，并在其中对密码额外进行了加密。</span><span class="sxs-lookup"><span data-stu-id="13b00-113">The result will be a MOF document that is fully encrypted using the DPAPIs and additionally have passwords encrypted within it.</span></span>

<span data-ttu-id="13b00-114">这种加密仅适用于配置 MOF 文档（例如 pending.mof、current.mof、previous.mof 和部分 MOF）。</span><span class="sxs-lookup"><span data-stu-id="13b00-114">This encryption only applies to configuration MOF documents (pending.mof, current.mof, previous.mof and partial MOFs).</span></span> <span data-ttu-id="13b00-115">仍以纯文本格式保存元配置 MOF，因为它们不太可能包含机密信息。</span><span class="sxs-lookup"><span data-stu-id="13b00-115">Meta-configuration MOFs are still saved in plain text since they less likely contain secrets.</span></span>
